<!doctype html><html lang=en><head><title>Pretty Printing Objects in Javscript REPLs :: Julian Dax</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="In the Node.js REPL, objects are converted to strings using the util.inspect() function. In Deno, there is the equivalent Deno.inspect(). You can influence what these do by implementing a function with the symbol nodejs.util.inspect.custom and Deno.customInspect respectively. If you implement both, pretty printing works in both. Check out this example for a binary tree:
export class Tree { constructor(value, left, right) { this.value = value; this.left = left; this.right = right; } [Symbol."><meta name=keywords content="Javascript,Node.js,Deno"><meta name=robots content="noodp"><link rel=canonical href=https://juliand.ax/posts/deno-node-pretty-print-objects/><link rel=stylesheet href=https://juliand.ax/styles.css><link rel="shortcut icon" href=https://juliand.ax/img/theme-colors/orange.png><link rel=apple-touch-icon href=https://juliand.ax/img/theme-colors/orange.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Pretty Printing Objects in Javscript REPLs"><meta property="og:description" content="In the Node.js REPL, objects are converted to strings using the util.inspect() function. In Deno, there is the equivalent Deno.inspect(). You can influence what these do by implementing a function with the symbol nodejs.util.inspect.custom and Deno.customInspect respectively. If you implement both, pretty printing works in both. Check out this example for a binary tree:
export class Tree { constructor(value, left, right) { this.value = value; this.left = left; this.right = right; } [Symbol."><meta property="og:url" content="https://juliand.ax/posts/deno-node-pretty-print-objects/"><meta property="og:site_name" content="Julian Dax"><meta property="og:image" content="https://juliand.ax/"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:published_time" content="2023-04-01 00:35:30 +0200 +0200"></head><body><div class="container headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Julian Dax</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/profile>Profile</a></li><li><a href=/showcase>Showcase</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/profile>Profile</a></li><li><a href=/showcase>Showcase</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://juliand.ax/posts/deno-node-pretty-print-objects/>Pretty Printing Objects in Javscript REPLs</a></h1><div class=post-meta><time class=post-date>2023-04-01 ::</time>
<span class=post-author>Julian Dax</span></div><span class=post-tags>#<a href=https://juliand.ax/tags/javascript/>Javascript</a>&nbsp;
#<a href=https://juliand.ax/tags/node.js/>Node.js</a>&nbsp;
#<a href=https://juliand.ax/tags/deno/>Deno</a>&nbsp;</span><div class=post-content><div><p>In the Node.js REPL, objects are converted to strings using the <a href=https://nodejs.org/dist/latest-v19.x/docs/api/util.html#utilinspectobject-options><code>util.inspect()</code></a> function.
In Deno, there is the equivalent <a href="https://deno.land/api@v1.32.1?s=Deno.inspect"><code>Deno.inspect()</code></a>.
You can influence what these do by implementing a function with the symbol <code>nodejs.util.inspect.custom</code> and
<code>Deno.customInspect</code> respectively. If you implement both, pretty printing works in both.
Check out this example for a binary tree:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Javascript data-lang=Javascript><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Tree</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>left</span>, <span style=color:#a6e22e>right</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>value</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>left</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>left</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>right</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>right</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    [<span style=color:#a6e22e>Symbol</span>.<span style=color:#66d9ef>for</span>(<span style=color:#e6db74>&#34;Deno.customInspect&#34;</span>)]() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>toString</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    [<span style=color:#a6e22e>Symbol</span>.<span style=color:#66d9ef>for</span>(<span style=color:#e6db74>&#34;nodejs.util.inspect.custom&#34;</span>)](){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>toString</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>toString</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>printNode</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>node</span>, <span style=color:#a6e22e>prefix</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>, <span style=color:#a6e22e>isLeft</span>) =&gt; {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>str</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>node</span> <span style=color:#f92672>!==</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>str</span> <span style=color:#f92672>+=</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>prefix</span><span style=color:#e6db74>}${</span><span style=color:#a6e22e>isLeft</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#39;├──&#39;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;└──&#39;</span><span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>value</span><span style=color:#e6db74>}</span><span style=color:#e6db74>\n`</span>;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>newPrefix</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>prefix</span><span style=color:#e6db74>}${</span><span style=color:#a6e22e>isLeft</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#39;│   &#39;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;    &#39;</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>;
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>str</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>printNode</span>(<span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>left</span>, <span style=color:#a6e22e>newPrefix</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>str</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>printNode</span>(<span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>right</span>, <span style=color:#a6e22e>newPrefix</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>str</span>;
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>printNode</span>(<span style=color:#66d9ef>this</span>).<span style=color:#a6e22e>trim</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Helper function to generate a balanced binary tree of a given depth
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>createBalancedTree</span>(<span style=color:#a6e22e>depth</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>depth</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>floor</span>(Math.<span style=color:#a6e22e>random</span>() <span style=color:#f92672>*</span> <span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>left</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createBalancedTree</span>(<span style=color:#a6e22e>depth</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>right</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createBalancedTree</span>(<span style=color:#a6e22e>depth</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Tree</span>(<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>left</span>, <span style=color:#a6e22e>right</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>And here is a Deno session that uses it:</p><pre tabindex=0><code>&gt; import {Tree, createBalancedTree} from &#34;./Tree.js&#34;
let tree = createBalancedTree(5);
undefined
&gt; tree
└── 49
    ├── 25
    │   ├── 44
    │   │   ├── 2
    │   │   │   ├── 58
    │   │   │   └── 84
    │   │   └── 85
    │   │       ├── 71
    │   │       └── 25
    │   └── 6
    │       ├── 89
    │       │   ├── 74
    │       │   └── 23
    │       └── 18
    │           ├── 78
    │           └── 29
    └── 55
        ├── 54
        │   ├── 79
        │   │   ├── 36
        │   │   └── 66
        │   └── 14
        │       ├── 69
        │       └── 51
        └── 81
            ├── 58
            │   ├── 1
            │   └── 67
            └── 29
                ├── 93
                └── 98
</code></pre><p>Isn’t that beautiful?</p></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2023 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>