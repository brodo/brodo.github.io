<!doctype html><html lang=en><head><title>String Representations of Javascript Objects :: Julian Dax</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="toString() and Symbol.toStringTag The default Object.prototype.toString() function is defined to the specification to return [object X] even for non-objects:
Object.prototype.toString.call(undefined) // returns &amp;#34;[object Undefined]&amp;#34; Object.prototype.toString.call(true) // returns &amp;#34;[object Boolean]&amp;#34; {}.toString() // returns &amp;#34;[object Object]&amp;#34; X is a so-called &amp;lsquo;string tag&amp;rsquo; and in newer versions of Javascipt, you can set it yourself:
{[Symbol.toStringTag]:&amp;#34;MyObject&amp;#34;}.toString() // returns &amp;#34;[object MyObject]&amp;#34; But for objects, you can also just implement the complete toString function:
{toString: ()=&amp;gt; &amp;#34;My Cool Object!"><meta name=keywords content="Javascript,Node.js,Deno"><meta name=robots content="noodp"><link rel=canonical href=https://juliand.ax/posts/deno-node-pretty-print-objects/><link rel=stylesheet href=https://juliand.ax/styles.css><link rel="shortcut icon" href=https://juliand.ax/img/theme-colors/orange.png><link rel=apple-touch-icon href=https://juliand.ax/img/theme-colors/orange.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="String Representations of Javascript Objects"><meta property="og:description" content="toString() and Symbol.toStringTag The default Object.prototype.toString() function is defined to the specification to return [object X] even for non-objects:
Object.prototype.toString.call(undefined) // returns &amp;#34;[object Undefined]&amp;#34; Object.prototype.toString.call(true) // returns &amp;#34;[object Boolean]&amp;#34; {}.toString() // returns &amp;#34;[object Object]&amp;#34; X is a so-called &amp;lsquo;string tag&amp;rsquo; and in newer versions of Javascipt, you can set it yourself:
{[Symbol.toStringTag]:&amp;#34;MyObject&amp;#34;}.toString() // returns &amp;#34;[object MyObject]&amp;#34; But for objects, you can also just implement the complete toString function:
{toString: ()=&amp;gt; &amp;#34;My Cool Object!"><meta property="og:url" content="https://juliand.ax/posts/deno-node-pretty-print-objects/"><meta property="og:site_name" content="Julian Dax"><meta property="og:image" content="https://juliand.ax/"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:published_time" content="2023-04-01 00:35:30 +0200 +0200"></head><body><div class="container headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Julian Dax</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/profile>Profile</a></li><li><a href=/showcase>Showcase</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/profile>Profile</a></li><li><a href=/showcase>Showcase</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://juliand.ax/posts/deno-node-pretty-print-objects/>String Representations of Javascript Objects</a></h1><div class=post-meta><time class=post-date>2023-04-01 ::</time>
<span class=post-author>Julian Dax</span></div><span class=post-tags>#<a href=https://juliand.ax/tags/javascript/>Javascript</a>&nbsp;
#<a href=https://juliand.ax/tags/node.js/>Node.js</a>&nbsp;
#<a href=https://juliand.ax/tags/deno/>Deno</a>&nbsp;</span><div class=post-content><div><h2 id=tostring-and-symboltostringtag><code>toString()</code> and <code>Symbol.toStringTag</code><a href=#tostring-and-symboltostringtag class=hanchor arialabel=Anchor>&#8983;</a></h2><p>The default <code>Object.prototype.toString()</code> function is
<a href=https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object.prototype.tostring>defined to the specification</a>
to return <code>[object X]</code> even for non-objects:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Javascript data-lang=Javascript><span style=display:flex><span>Object.<span style=color:#a6e22e>prototype</span>.<span style=color:#a6e22e>toString</span>.<span style=color:#a6e22e>call</span>(<span style=color:#66d9ef>undefined</span>) <span style=color:#75715e>// returns &#34;[object Undefined]&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>Object.<span style=color:#a6e22e>prototype</span>.<span style=color:#a6e22e>toString</span>.<span style=color:#a6e22e>call</span>(<span style=color:#66d9ef>true</span>) <span style=color:#75715e>// returns &#34;[object Boolean]&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>{}.<span style=color:#a6e22e>toString</span>() <span style=color:#75715e>// returns &#34;[object Object]&#34;
</span></span></span></code></pre></div><p><code>X</code> is a so-called &lsquo;string tag&rsquo; and in newer versions of Javascipt, you can set it yourself:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Javascript data-lang=Javascript><span style=display:flex><span>{[<span style=color:#a6e22e>Symbol</span>.<span style=color:#a6e22e>toStringTag</span>]<span style=color:#f92672>:</span><span style=color:#e6db74>&#34;MyObject&#34;</span>}.<span style=color:#a6e22e>toString</span>() <span style=color:#75715e>// returns &#34;[object MyObject]&#34;
</span></span></span></code></pre></div><p>But for objects, you can also just implement the complete <code>toString</code> function:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Javascript data-lang=Javascript><span style=display:flex><span>{<span style=color:#a6e22e>toString</span><span style=color:#f92672>:</span> ()=&gt; <span style=color:#e6db74>&#34;My Cool Object!&#34;</span>}.<span style=color:#a6e22e>toString</span>() <span style=color:#75715e>// returns &#34;My Cool Object!&#34;
</span></span></span></code></pre></div><p><strong>However, the <code>toString()</code> function is not used by <code>console.log()</code> or in the Node.js or Deno REPLs.</strong></p><h2 id=inspect-is-the-real-tostring><code>inspect()</code> is the real <code>toString()</code><a href=#inspect-is-the-real-tostring class=hanchor arialabel=Anchor>&#8983;</a></h2><p>In Node.js, objects are converted to strings using the <a href=https://nodejs.org/dist/latest-v19.x/docs/api/util.html#utilinspectobject-options><code>util.inspect()</code></a> function.
In Deno, there is the equivalent <a href="https://deno.land/api@v1.32.1?s=Deno.inspect"><code>Deno.inspect()</code></a>. These methods are used
both in the REPLs and when using <code>console.log()</code>.
You can influence what these do by implementing a function with the symbol <code>nodejs.util.inspect.custom</code> and
<code>Deno.customInspect</code> respectively. If you implement both, pretty printing works in both.
Check out this example for a binary tree:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Javascript data-lang=Javascript><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Tree</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>left</span>, <span style=color:#a6e22e>right</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>value</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>left</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>left</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>right</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>right</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    [<span style=color:#a6e22e>Symbol</span>.<span style=color:#66d9ef>for</span>(<span style=color:#e6db74>&#34;Deno.customInspect&#34;</span>)]() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>toString</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    [<span style=color:#a6e22e>Symbol</span>.<span style=color:#66d9ef>for</span>(<span style=color:#e6db74>&#34;nodejs.util.inspect.custom&#34;</span>)](){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>toString</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>toString</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>printNode</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>node</span>, <span style=color:#a6e22e>prefix</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>, <span style=color:#a6e22e>isLeft</span>) =&gt; {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>str</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>node</span> <span style=color:#f92672>!==</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>str</span> <span style=color:#f92672>+=</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>prefix</span><span style=color:#e6db74>}${</span><span style=color:#a6e22e>isLeft</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#39;├──&#39;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;└──&#39;</span><span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>value</span><span style=color:#e6db74>}</span><span style=color:#e6db74>\n`</span>;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>newPrefix</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>prefix</span><span style=color:#e6db74>}${</span><span style=color:#a6e22e>isLeft</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#39;│   &#39;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;    &#39;</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>;
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>str</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>printNode</span>(<span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>left</span>, <span style=color:#a6e22e>newPrefix</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>str</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>printNode</span>(<span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>right</span>, <span style=color:#a6e22e>newPrefix</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>str</span>;
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>printNode</span>(<span style=color:#66d9ef>this</span>).<span style=color:#a6e22e>trim</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>And here is a Deno session that uses it:</p><pre tabindex=0><code>&gt; tree
└── 52
    ├── 41
    │   ├── 51
    │   └── 44
    └── 94
        ├── 54
        └── 36
&gt; console.log(tree);
└── 52
    ├── 41
    │   ├── 51
    │   └── 44
    └── 94
        ├── 54
        └── 36
</code></pre><p>Isn’t that beautiful? Sadly there is no way to accomplish this in browsers.</p></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2023 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>